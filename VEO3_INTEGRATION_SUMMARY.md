# Google Veo3 API é›†æˆæ€»ç»“

## é¡¹ç›®æ¦‚è¿°

å·²æˆåŠŸå°†Google Gemini APIçš„Veo3è§†é¢‘ç”ŸæˆåŠŸèƒ½é›†æˆåˆ°ç°æœ‰çš„Images APIé¡¹ç›®ä¸­ï¼Œæä¾›äº†å®Œæ•´çš„APIæ¥å£å’ŒMCPå·¥å…·æ”¯æŒã€‚

## å·²å®Œæˆçš„å·¥ä½œ

### 1. é…ç½®ç®¡ç† (`core/config.py`)
- âœ… æ·»åŠ äº†Google Gemini APIå¯†é’¥é…ç½®
- âœ… åœ¨default_fieldsä¸­æ·»åŠ äº†veo3å‚æ•°é…ç½®
- âœ… æ”¯æŒç¯å¢ƒå˜é‡é…ç½®

### 2. APIå®¢æˆ·ç«¯å®ç° (`core/images_client.py`)
- âœ… å®ç°äº†`GeminiVeo3Client`ç±»
- âœ… æ”¯æŒè§†é¢‘åˆ›å»º (`create_video`)
- âœ… æ”¯æŒä»»åŠ¡çŠ¶æ€æŸ¥è¯¢ (`get_task_status`)
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- âœ… è¿æ¥æ± å’Œæ€§èƒ½ä¼˜åŒ–
- âœ… å…¨å±€å®¢æˆ·ç«¯å®ä¾‹ç®¡ç†

### 3. FastAPIè·¯ç”± (`routers/api.py`)
- âœ… æ·»åŠ äº†`GeminiVeo3Request`è¯·æ±‚æ¨¡å‹
- âœ… å®ç°äº†`/api/gemini/veo3/generate`è§†é¢‘ç”Ÿæˆç«¯ç‚¹
- âœ… å®ç°äº†`/api/gemini/veo3/task/{task_id}`çŠ¶æ€æŸ¥è¯¢ç«¯ç‚¹
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼

### 4. MCPå·¥å…·é›†æˆ (`routers/mcp/`)
- âœ… åœ¨`images_tools.py`ä¸­æ·»åŠ äº†Veo3å·¥å…·å‡½æ•°ï¼š
  - `create_gemini_veo3_video_tool`
  - `get_gemini_veo3_task_tool`
- âœ… åœ¨`main.py`ä¸­æ³¨å†Œäº†å·¥å…·å‡½æ•°æ˜ å°„
- âœ… åœ¨`simple_mcp_server.py`ä¸­æ·»åŠ äº†å·¥å…·å®šä¹‰

### 5. æµ‹è¯•å’ŒéªŒè¯
- âœ… åˆ›å»ºäº†æµ‹è¯•è„šæœ¬`test_google_veo3.py`
- âœ… åˆ›å»ºäº†æ¨¡å‹åˆ—è¡¨æŸ¥è¯¢è„šæœ¬`list_models.py`

## APIæ¥å£è§„æ ¼

### è§†é¢‘ç”Ÿæˆæ¥å£
```http
POST /api/gemini/veo3/generate
Content-Type: application/json

{
    "prompt": "è§†é¢‘æè¿°æ–‡æœ¬",
    "duration": "8s",           // å¯é€‰ï¼Œ1s-8s
    "aspect_ratio": "16:9",     // å¯é€‰ï¼Œ16:9/9:16/1:1
    "seed": 12345,              // å¯é€‰ï¼Œéšæœºç§å­
    "temperature": 0.9,         // å¯é€‰ï¼Œç”Ÿæˆæ¸©åº¦
    "top_p": 0.8,              // å¯é€‰ï¼ŒTop-pé‡‡æ ·
    "top_k": 40,               // å¯é€‰ï¼ŒTop-ké‡‡æ ·
    "max_output_tokens": 8192   // å¯é€‰ï¼Œæœ€å¤§è¾“å‡ºtokens
}
```

### ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢æ¥å£
```http
GET /api/gemini/veo3/task/{task_id}
```

## MCPå·¥å…·

### 1. create_gemini_veo3_video
- **åŠŸèƒ½**: åˆ›å»ºGoogleå®˜æ–¹Veo3è§†é¢‘ç”Ÿæˆä»»åŠ¡
- **å‚æ•°**: prompt, duration, aspect_ratio, seedç­‰
- **è¿”å›**: JSONæ ¼å¼çš„è§†é¢‘ç”Ÿæˆç»“æœ

### 2. get_gemini_veo3_task
- **åŠŸèƒ½**: è·å–Google Veo3è§†é¢‘ä»»åŠ¡çŠ¶æ€
- **å‚æ•°**: task_id
- **è¿”å›**: JSONæ ¼å¼çš„ä»»åŠ¡çŠ¶æ€ä¿¡æ¯

## å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ
1. å®Œæ•´çš„ä»£ç é›†æˆåˆ°é¡¹ç›®æ¶æ„ä¸­
2. APIæ¥å£å®ç°ï¼ˆFastAPI + MCPï¼‰
3. é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
4. æµ‹è¯•è„šæœ¬

### âš ï¸ éœ€è¦æ³¨æ„çš„é—®é¢˜
1. **APIè®¿é—®é™åˆ¶**: å½“å‰æµ‹è¯•çš„API Keyå¯èƒ½æ²¡æœ‰Veo3è®¿é—®æƒé™
2. **åœ°ç†ä½ç½®é™åˆ¶**: é”™è¯¯ä¿¡æ¯æ˜¾ç¤º"User location is not supported for the API use"
3. **æ¨¡å‹å¯ç”¨æ€§**: Veo3å¯èƒ½ä»åœ¨é¢„è§ˆé˜¶æ®µï¼Œéœ€è¦ç‰¹æ®Šæƒé™

### ğŸ”§ APIè°ƒç”¨é—®é¢˜æ’æŸ¥
æ ¹æ®æµ‹è¯•ç»“æœï¼Œå‘ç°ä»¥ä¸‹é—®é¢˜ï¼š
1. åˆå§‹ä½¿ç”¨`models/veo-3`æ¨¡å‹å â†’ 404é”™è¯¯
2. ä¿®æ­£ä¸º`models/veo-3.0-generate-preview` â†’ ä»ç„¶404é”™è¯¯
3. API keyåœ°ç†ä½ç½®å—é™

## æ¨èçš„ä¸‹ä¸€æ­¥

1. **è·å–æ­£ç¡®çš„APIè®¿é—®æƒé™**
   - ç¡®ä¿API Keyæœ‰Veo3è®¿é—®æƒé™
   - æ£€æŸ¥åœ°ç†ä½ç½®é™åˆ¶
   - å¯èƒ½éœ€è¦ç”³è¯·Veo3é¢„è§ˆè®¿é—®

2. **éªŒè¯æ¨¡å‹åç§°**
   - é€šè¿‡Google AI Studioç¡®è®¤å¯ç”¨çš„æ¨¡å‹
   - å¯èƒ½éœ€è¦ä½¿ç”¨ä¸åŒçš„ç«¯ç‚¹æˆ–APIç‰ˆæœ¬

3. **å¤‡é€‰æ–¹æ¡ˆ**
   - è€ƒè™‘ä½¿ç”¨Google Vertex AI API
   - æˆ–è€…é›†æˆç¬¬ä¸‰æ–¹Veo3 APIæä¾›å•†

## ä»£ç æ¶æ„ä¼˜åŠ¿

1. **æ¨¡å—åŒ–è®¾è®¡**: å®¢æˆ·ç«¯ã€è·¯ç”±ã€å·¥å…·åˆ†ç¦»
2. **é…ç½®é›†ä¸­ç®¡ç†**: é€šè¿‡ç¯å¢ƒå˜é‡å’Œé…ç½®ç±»
3. **é”™è¯¯å¤„ç†å®Œå–„**: å¤šå±‚é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
4. **æ€§èƒ½ä¼˜åŒ–**: è¿æ¥æ± ã€å¼‚æ­¥å¤„ç†
5. **æ‰©å±•æ€§å¼º**: æ˜“äºæ·»åŠ æ–°çš„AIæ¨¡å‹

## ä½¿ç”¨ç¤ºä¾‹

### å‘½ä»¤è¡Œæµ‹è¯•
```bash
python3 test_google_veo3.py
```

### FastAPIæ–‡æ¡£
è®¿é—® `http://localhost:5512/docs` æŸ¥çœ‹APIæ–‡æ¡£

### MCPå·¥å…·ä½¿ç”¨
é€šè¿‡MCPå®¢æˆ·ç«¯è°ƒç”¨å·¥å…·ï¼š
```json
{
    "tool": "create_gemini_veo3_video",
    "arguments": {
        "prompt": "A cat playing with a ball",
        "duration": "5s",
        "aspect_ratio": "1:1"
    }
}
```

## é‡è¦å‘ç°ï¼šVertex AI vs Gemini API

ç»è¿‡æ·±å…¥ç ”ç©¶ï¼Œå‘ç°Googleæä¾›äº†ä¸¤ç§ä¸åŒçš„Veo APIï¼š

### 1. Gemini API (ai.google.dev)
- âœ… **å¯è®¿é—®**: åœ°ç†ä½ç½®é™åˆ¶å·²è§£é™¤
- âŒ **æ— Veo3**: æ¨¡å‹åˆ—è¡¨ä¸­æ²¡æœ‰Veo3è§†é¢‘ç”Ÿæˆæ¨¡å‹
- âœ… **æœ‰å›¾åƒç”Ÿæˆ**: æ”¯æŒ`gemini-2.0-flash-exp-image-generation`ç­‰å›¾åƒæ¨¡å‹

### 2. Vertex AI API (cloud.google.com)
- ğŸ“‹ **å®˜æ–¹æ–‡æ¡£ç¡®è®¤**: æ”¯æŒ`veo-3.0-generate-preview`æ¨¡å‹
- ğŸ” **éœ€è¦é…ç½®**: éœ€è¦Google Cloudé¡¹ç›®IDå’Œé€‚å½“çš„è®¤è¯
- ğŸ¯ **ä¸“ä¸šç”¨é€”**: é¢å‘ä¼ä¸šå’Œå¼€å‘è€…çš„å®Œæ•´è§†é¢‘ç”Ÿæˆè§£å†³æ–¹æ¡ˆ

## åŒé‡å®ç°æ¶æ„

ç°åœ¨é¡¹ç›®æ”¯æŒä¸¤å¥—å®Œæ•´çš„APIï¼š

### Gemini API å®ç°
- **å®¢æˆ·ç«¯**: `GeminiVeo3Client`
- **è·¯ç”±**: `/api/gemini/veo3/*`
- **çŠ¶æ€**: å¯ç”¨ä½†æ— çœŸæ­£çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹

### Vertex AI å®ç° (æ–°å¢)
- **å®¢æˆ·ç«¯**: `VertexAIVeoClient`
- **è·¯ç”±**: `/api/vertex/veo/*`
- **çŠ¶æ€**: æ¶æ„å®Œæ•´ï¼Œç­‰å¾…é…ç½®

## é…ç½®è¦æ±‚

### Vertex AI Veoé…ç½®
```bash
export VERTEX_PROJECT_ID="your-google-cloud-project-id"
export VERTEX_LOCATION="us-central1"  # å¯é€‰ï¼Œé»˜è®¤us-central1
export GEMINI_API_KEY="your-api-key"  # ç”¨äºè®¤è¯
```

## APIæ¥å£å¯¹æ¯”

### Vertex AI Veoæ¥å£ (æ¨è)
```http
POST /api/vertex/veo/generate
{
    "prompt": "è§†é¢‘æè¿°",
    "model_id": "veo-3.0-generate-preview",
    "duration": 5,
    "aspect_ratio": "16:9",
    "resolution": "720p",
    "sample_count": 1,
    "seed": 12345,
    "negative_prompt": "ä½è´¨é‡"
}
```

### æ“ä½œçŠ¶æ€æŸ¥è¯¢
```http
GET /api/vertex/veo/operation/{operation_name}
```

## æ€»ç»“

1. **æ¶æ„å®Œæ•´**: åŒæ—¶æ”¯æŒGemini APIå’ŒVertex AIä¸¤å¥—æ–¹æ¡ˆ
2. **å®˜æ–¹æ”¯æŒ**: Vertex AIæ˜¯Googleå®˜æ–¹æ¨èçš„Veo3è§†é¢‘ç”Ÿæˆæ–¹æ¡ˆ
3. **é…ç½®çµæ´»**: å¯æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„API
4. **æ‰©å±•æ€§å¼º**: ä»£ç ç»“æ„æ”¯æŒæœªæ¥æ·»åŠ æ›´å¤šAIæ¨¡å‹

ä¸€æ—¦é…ç½®äº†æ­£ç¡®çš„Google Cloudé¡¹ç›®å’Œè®¤è¯ï¼ŒVertex AI Veoåº”è¯¥èƒ½å¤Ÿæä¾›çœŸæ­£çš„è§†é¢‘ç”ŸæˆåŠŸèƒ½ã€‚