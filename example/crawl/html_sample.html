<!DOCTYPE html><html lang="zh-CN" class="group/root" id="html" data-theme="light" data-accent-color="purple"><head><script src="data:text/javascript;base64,KCgpID0+IHsKICBjb25zdCBBcHBUaGVtZSA9IHsKICAgIExpZ2h0OiAnbGlnaHQnLAogICAgRGFyazogJ2RhcmsnLAogICAgU3lzdGVtOiAnc3lzdGVtJywKICB9OwogIGNvbnN0IEludGVybmFsQ2xhc3NOYW1lID0gewogICAgQnJhbmRMb2dvSW1nOiAnX2JyYW5kLWxvZ28taW1nXzI0YmInLAogIH07CgogIGZ1bmN0aW9uIF9fc2V0RG9jc1RoZW1lKHRoZW1lUHJpbWFyeVNldHRpbmdzLCBsb2dvU2V0dGluZ3MsIGN1cnJlbnRUaGVtZSkgewogICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCiAgICBodG1sLnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIGN1cnJlbnRUaGVtZSk7CiAgICBjb25zdCBpc09sZFNhZmFyaSA9ICgoKSA9PiB7CiAgICAgIGlmICgvU2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdWZXJzaW9uLycpKSB7CiAgICAgICAgY29uc3QgdmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQuc3BsaXQoJ1ZlcnNpb24vJyk/LlsxXT8uc3BsaXQoJyAnKT8uWzBdID8/ICcnOwogICAgICAgIGNvbnN0IFttYWpvciwgbWlub3JdID0gdmVyc2lvbi5zcGxpdCgnLicpOwogICAgICAgIGlmIChtYWpvciAmJiBtaW5vcikgewogICAgICAgICAgY29uc3QgbWFqb3JOdW1iZXIgPSBwYXJzZUludChtYWpvciwgMTApOwogICAgICAgICAgY29uc3QgbWlub3JOdW1iZXIgPSBwYXJzZUludChtaW5vciwgMTApOwogICAgICAgICAgaWYgKG1ham9yTnVtYmVyID4gMTggfHwgKG1ham9yTnVtYmVyID09PSAxOCAmJiBtaW5vck51bWJlciA+PSA0KSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pKCk7CiAgICBpZiAoaXNPbGRTYWZhcmkpIHsKICAgICAgaHRtbC5jbGFzc0xpc3QuYWRkKCdvbGQtc2FmYXJpJyk7CiAgICB9CgogICAgY29uc3QgeyBhY2NlbnRDb2xvciB9ID0gdGhlbWVQcmltYXJ5U2V0dGluZ3NbY3VycmVudFRoZW1lXSA/PyB7fTsKICAgIGh0bWwuc2V0QXR0cmlidXRlKCdkYXRhLWFjY2VudC1jb2xvcicsIGFjY2VudENvbG9yIHx8ICdwdXJwbGUnKTsKCiAgICB3aW5kb3cuX191cGRhdGVUaGVtZUVsZW1lbnQgPSAoKSA9PiB7CiAgICAgIGNvbnN0IGxvZ28gPSBsb2dvU2V0dGluZ3NbY3VycmVudFRoZW1lXTsKICAgICAgaWYgKGxvZ28pIHsKICAgICAgICBjb25zdCBicmFuZExvZ29zID0gWy4uLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoSW50ZXJuYWxDbGFzc05hbWUuQnJhbmRMb2dvSW1nKV07CiAgICAgICAgYnJhbmRMb2dvcy5mb3JFYWNoKChicmFuZExvZ28pID0+IHsKICAgICAgICAgIGlmIChicmFuZExvZ28gJiYgYnJhbmRMb2dvPy5zcmMgIT09IGxvZ28pIHsKICAgICAgICAgICAgYnJhbmRMb2dvLnNyYyA9IGxvZ287CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CiAgICB3aW5kb3cuX191cGRhdGVUaGVtZUVsZW1lbnQoKTsKCiAgICB3aW5kb3cuX19jdXJyZW50VGhlbWUgPSBjdXJyZW50VGhlbWU7CiAgfQogIHdpbmRvdy5fX3NldERvY3NUaGVtZSA9IF9fc2V0RG9jc1RoZW1lOwoKICBsZXQgaXNBZGRFdmVudExpc3RlbmVyID0gZmFsc2U7CiAgbGV0IGlzUmVzZXREb2NzVGhlbWUgPSBmYWxzZTsKICBmdW5jdGlvbiBfX3ByZXBhcmVEb2NzQ29uZmlnU2NyaXB0KGNvbmZpZyA9IHt9KSB7CiAgICBjb25zdCBMb2NhbFN0b3JhZ2VLZXkgPSB7CiAgICAgIGdldCBPbmxpbmVUaGVtZSgpIHsKICAgICAgICByZXR1cm4gYG9ubGluZVNoYXJlLnRoZW1lLiR7Y29uZmlnLmlkIHx8ICcwJ31gOwogICAgICB9LAogICAgICBnZXQgVXNlclRoZW1lKCkgewogICAgICAgIHJldHVybiBgdXNlci50aGVtZS4ke2NvbmZpZy5pZCB8fCAnMCd9YDsKICAgICAgfSwKICAgIH07CiAgICBpZiAoIWNvbmZpZyB8fCB0eXBlb2YgY29uZmlnICE9PSAnb2JqZWN0JykgewogICAgICByZXR1cm47CiAgICB9CiAgICB3aW5kb3cuX19zdWJkaXJlY3RvcnkgPSBjb25maWcuc3ViZGlyZWN0b3J5OwogICAgY29uc3QgdGhlbWUgPSBjb25maWcudGhlbWUgfHwgQXBwVGhlbWUuU3lzdGVtOwoKICAgIGNvbnN0IGxvY2FsT25saW5lVGhlbWUgPSAoKCkgPT4gewogICAgICBjb25zdCBsb2NhbFN0b3JhZ2VUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExvY2FsU3RvcmFnZUtleS5PbmxpbmVUaGVtZSk7CiAgICAgIGlmIChsb2NhbFN0b3JhZ2VUaGVtZSAmJiBPYmplY3QudmFsdWVzKEFwcFRoZW1lKS5pbmNsdWRlcyhsb2NhbFN0b3JhZ2VUaGVtZSkpIHsKICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlVGhlbWU7CiAgICAgIH0KICAgICAgcmV0dXJuIEFwcFRoZW1lLlN5c3RlbTsKICAgIH0pKCk7CiAgICBjb25zdCBsb2NhbFVzZXJUaGVtZSA9ICgoKSA9PiB7CiAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZVRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTG9jYWxTdG9yYWdlS2V5LlVzZXJUaGVtZSk7CiAgICAgIGlmICgKICAgICAgICBsb2NhbFN0b3JhZ2VUaGVtZSAmJgogICAgICAgIGxvY2FsU3RvcmFnZVRoZW1lICE9PSBBcHBUaGVtZS5TeXN0ZW0gJiYKICAgICAgICBPYmplY3QudmFsdWVzKEFwcFRoZW1lKS5pbmNsdWRlcyhsb2NhbFN0b3JhZ2VUaGVtZSkKICAgICAgKSB7CiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZVRoZW1lOwogICAgICB9CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9KSgpOwoKICAgIGNvbnN0IGN1cnJlbnRUaGVtZSA9ICgoKSA9PiB7CiAgICAgIGlmIChsb2NhbE9ubGluZVRoZW1lID09PSB0aGVtZSAmJiBsb2NhbFVzZXJUaGVtZSkgewogICAgICAgIHJldHVybiBsb2NhbFVzZXJUaGVtZTsKICAgICAgfQoKICAgICAgaWYgKHRoZW1lID09PSBBcHBUaGVtZS5TeXN0ZW0pIHsKICAgICAgICBjb25zdCBtZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJyk7CiAgICAgICAgcmV0dXJuIG1lZGlhLm1hdGNoZXMgPyBBcHBUaGVtZS5EYXJrIDogQXBwVGhlbWUuTGlnaHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoZW1lOwogICAgICB9CiAgICB9KSgpOwoKICAgIF9fc2V0RG9jc1RoZW1lKGNvbmZpZy50aGVtZVByaW1hcnlTZXR0aW5ncywgY29uZmlnLmxvZ29TZXR0aW5ncywgY3VycmVudFRoZW1lKTsKCiAgICBpZiAoIWlzQWRkRXZlbnRMaXN0ZW5lcikgewogICAgICBpc0FkZEV2ZW50TGlzdGVuZXIgPSB0cnVlOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZSkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGUubWVzc2FnZS5zdGFydHNXaXRoKCdVbmNhdWdodCBFcnJvcjogTWluaWZpZWQgUmVhY3QgZXJyb3IgIzQxODsnKSB8fAogICAgICAgICAgZS5tZXNzYWdlLnN0YXJ0c1dpdGgoJ1VuY2F1Z2h0IEVycm9yOiBNaW5pZmllZCBSZWFjdCBlcnJvciAjNDIzOycpCiAgICAgICAgKSB7CiAgICAgICAgICBpZiAoIWlzUmVzZXREb2NzVGhlbWUpIHsKICAgICAgICAgICAgaXNSZXNldERvY3NUaGVtZSA9IHRydWU7CiAgICAgICAgICAgIF9fc2V0RG9jc1RoZW1lKGNvbmZpZy50aGVt